import streamlit as st
from services.settings_manager import SettingsManager

TRANSLATIONS = {
    "ja": {
        "app_title": "ðŸ¢ å–¶æ¥­ç‰¹åŒ–SaaS",
        "menu": "ãƒ¡ãƒ‹ãƒ¥ãƒ¼",
        "select_page": "ãƒšãƒ¼ã‚¸ã‚’é¸æŠž",
        "pre_advice": "äº‹å‰ã‚¢ãƒ‰ãƒã‚¤ã‚¹ç”Ÿæˆ",
        "post_review": "å•†è«‡å¾Œãµã‚Šã‹ãˆã‚Šè§£æž",
        "icebreaker": "ã‚¢ã‚¤ã‚¹ãƒ–ãƒ¬ã‚¤ã‚¯ç”Ÿæˆ",
        "history": "å±¥æ­´",
        "settings": "è¨­å®šãƒ»ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚º",
        "search_enhancement": "æ¤œç´¢æ©Ÿèƒ½ã®é«˜åº¦åŒ–",
        "quickstart_mode": "ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆãƒ¢ãƒ¼ãƒ‰",
        "quickstart_help": "å¿…è¦æœ€å°é™ã®å…¥åŠ›é …ç›®ã®ã¿è¡¨ç¤º",
        "sidebar_toggle_label": "â˜° ãƒ¡ãƒ‹ãƒ¥ãƒ¼",
        "sidebar_toggle_help": "ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‚’è¡¨ç¤º/éžè¡¨ç¤º",
        "tab_navigation_hint": "ãƒšãƒ¼ã‚¸åˆ‡æ›¿ã¯ä¸‹ã®ã‚¿ãƒ–ã‹ã‚‰è¡Œãˆã¾ã™",
        "fill_later": "å¾Œã§å…¥åŠ›ã™ã‚‹",
        "skip": "ã‚¹ã‚­ãƒƒãƒ—",
        "later_help": "å¿…é ˆé …ç›®ä»¥å¤–ã¯å¾Œã‹ã‚‰ç·¨é›†ã§ãã¾ã™",
        "tutorial_title": "ã‚ˆã†ã“ã Sales SaaS ã¸",
        "tutorial_message": "ã“ã®ã‚¢ãƒ—ãƒªã®ä½¿ã„æ–¹ã‚’ç°¡å˜ã«ç´¹ä»‹ã—ã¾ã™ã€‚è¨­å®šãƒšãƒ¼ã‚¸ã‹ã‚‰ã„ã¤ã§ã‚‚å†è¡¨ç¤ºã§ãã¾ã™ã€‚",
        "tutorial_close": "ã¯ã˜ã‚ã‚‹",
        "show_tutorial_on_start": "èµ·å‹•æ™‚ã«ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’è¡¨ç¤º",
        "show_tutorial_on_start_help": "æ¬¡å›žèµ·å‹•æ™‚ã«ç°¡å˜ãªã‚¬ã‚¤ãƒ‰ã‚’è¡¨ç¤ºã—ã¾ã™",
        "show_tutorial_again": "ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ä»Šã™ãè¡¨ç¤º",

        "pre_advice_header": "äº‹å‰ã‚¢ãƒ‰ãƒã‚¤ã‚¹ç”Ÿæˆ",
        "pre_advice_desc": "å•†è«‡å‰ã®æº–å‚™ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚å–¶æ¥­ã‚¿ã‚¤ãƒ—ã€æ¥­ç•Œã€å•†å“æƒ…å ±ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚",
        "input_form_tab": "å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ",
        "icebreaker_tab": "ã‚¢ã‚¤ã‚¹ãƒ–ãƒ¬ã‚¤ã‚¯",

        "post_review_header": "ðŸ” å•†è«‡å¾Œãµã‚Šã‹ãˆã‚Šè§£æž",
        "post_review_desc": "å•†è«‡å¾Œã®è­°äº‹éŒ²ã‚„ãƒ¡ãƒ¢ã‚’åˆ†æžã—ã€æ¬¡å›žã¸ã®æ”¹å–„ç‚¹ã¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒ³ã‚’ç”Ÿæˆã—ã¾ã™ã€‚",

        "icebreaker_header": "ðŸŽ¯ ã‚¢ã‚¤ã‚¹ãƒ–ãƒ¬ã‚¤ã‚¯ç”Ÿæˆ",
        "icebreaker_desc": "å–¶æ¥­ã‚¿ã‚¤ãƒ—ã¨æ¥­ç•Œã«å¿œã˜ãŸã€è‡ªç„¶ã§è¦ªã—ã¿ã‚„ã™ã„ã‚¢ã‚¤ã‚¹ãƒ–ãƒ¬ã‚¤ã‚¯ã‚’ç”Ÿæˆã—ã¾ã™ã€‚",

        "history_header": "å±¥æ­´ï¼ˆã‚»ãƒƒã‚·ãƒ§ãƒ³ä¸€è¦§ï¼‰",
        "history_desc": "ä¿å­˜ã•ã‚ŒãŸç”Ÿæˆçµæžœã‚’å‚ç…§ãƒ»å†åˆ©ç”¨ã§ãã¾ã™ã€‚",
        "history_export_json": "JSONã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰",
        "history_export_csv": "CSVã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰",

        "search_enhancement_title": "ðŸ” æ¤œç´¢æ©Ÿèƒ½ã®é«˜åº¦åŒ–",
        "search_enhancement_desc": "LLMã®çŸ¥è­˜ã‚’æ´»ç”¨ã—ã¦æ¤œç´¢çµæžœã®å“è³ªå‘ä¸Šã¨ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’æ”¹å–„ã—ã¾ã™",

        "settings_page_title": "âš™ï¸ è¨­å®šãƒ»ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚º",
        "settings_page_desc": "ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å‹•ä½œã‚’ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚ºã§ãã¾ã™ã€‚",
        "tab_llm": "ðŸ¤– LLMè¨­å®š",
        "tab_search": "ðŸ” æ¤œç´¢è¨­å®š",
        "tab_ui": "ðŸŽ¨ UIè¨­å®š",
        "tab_data": "ðŸ’¾ ãƒ‡ãƒ¼ã‚¿è¨­å®š",
        "tab_import_export": "ðŸ“ ã‚¤ãƒ³ãƒãƒ¼ãƒˆ/ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ",
        "tab_crm": "ðŸ”— CRMé€£æº",
        "language_setting": "è¨€èªžè¨­å®š",
        "language_setting_help": "ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¡¨ç¤ºè¨€èªž",
        "pre_advice_industry_label": "æ¥­ç•Œ *",
        "pre_advice_product_label": "å•†å“ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ *",
        "pre_advice_product_label_optional": "å•†å“ãƒ»ã‚µãƒ¼ãƒ“ã‚¹",
        "post_review_industry_label": "æ¥­ç•Œ *",
        "post_review_product_label": "å•†å“ãƒ»ã‚µãƒ¼ãƒ“ã‚¹ *",
        "import_from_crm": "CRMã‹ã‚‰èª­ã¿è¾¼ã‚€",
        "crm_section_title": "ðŸ”— CRMé€£æº",
        "crm_customer_id": "CRMé¡§å®¢ID",
        "crm_import_success": "CRMãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ",
        "crm_import_failed": "CRMãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã«å¤±æ•—ã—ã¾ã—ãŸ",
        "crm_enable": "CRMé€£æºã‚’æœ‰åŠ¹åŒ–",
        "crm_enable_help": "CRMã‹ã‚‰é¡§å®¢æƒ…å ±ã‚’èª­ã¿è¾¼ã‚€æ©Ÿèƒ½ã‚’æœ‰åŠ¹ã«ã—ã¾ã™",
        "crm_api_key_missing": "CRM APIã‚­ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ç’°å¢ƒå¤‰æ•°CRM_API_KEYã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚",
    },
    "en": {
        "app_title": "ðŸ¢ Sales SaaS",
        "menu": "Menu",
        "select_page": "Select Page",
        "pre_advice": "Pre-Advice",
        "post_review": "Post Review",
        "icebreaker": "Icebreaker",
        "history": "History",
        "settings": "Settings & Customization",
        "search_enhancement": "Advanced Search",
        "quickstart_mode": "Quick Start Mode",
        "quickstart_help": "Display only essential inputs",
        "sidebar_toggle_label": "â˜° Menu",
        "sidebar_toggle_help": "Show or hide sidebar",
        "tab_navigation_hint": "Use the tabs below to switch pages",
        "fill_later": "Fill later",
        "skip": "Skip",
        "later_help": "Optional fields can be edited later",
        "tutorial_title": "Welcome to Sales SaaS",
        "tutorial_message": "This brief tutorial will help you get started. You can show it again from Settings.",
        "tutorial_close": "Start",
        "show_tutorial_on_start": "Show tutorial on startup",
        "show_tutorial_on_start_help": "Display a brief guide when the app launches",
        "show_tutorial_again": "Show tutorial now",

        "pre_advice_header": "Pre-Advice",
        "pre_advice_desc": "Support your preparation before meetings. Provide sales type, industry and product info.",
        "input_form_tab": "Input Form",
        "icebreaker_tab": "Icebreaker",

        "post_review_header": "ðŸ” Post Review Analysis",
        "post_review_desc": "Analyze meeting notes to generate improvements and next actions.",

        "icebreaker_header": "ðŸŽ¯ Icebreaker Generator",
        "icebreaker_desc": "Generate natural icebreakers based on sales type and industry.",

        "history_header": "History (Sessions)",
        "history_desc": "Browse and reuse saved outputs.",
        "history_export_json": "Download JSON",
        "history_export_csv": "Download CSV",

        "search_enhancement_title": "ðŸ” Search Enhancement",
        "search_enhancement_desc": "Leverage LLM knowledge to improve search quality and scoring.",

        "settings_page_title": "âš™ï¸ Settings & Customization",
        "settings_page_desc": "Customize how the application works.",
        "tab_llm": "ðŸ¤– LLM Settings",
        "tab_search": "ðŸ” Search Settings",
        "tab_ui": "ðŸŽ¨ UI Settings",
        "tab_data": "ðŸ’¾ Data Settings",
        "tab_import_export": "ðŸ“ Import/Export",
        "tab_crm": "ðŸ”— CRM Integration",
        "language_setting": "Language",
        "language_setting_help": "Display language of the application",
        "pre_advice_industry_label": "Industry *",
        "pre_advice_product_label": "Product/Service *",
        "pre_advice_product_label_optional": "Product/Service",
        "post_review_industry_label": "Industry *",
        "post_review_product_label": "Product/Service *",
        "import_from_crm": "Import from CRM",
        "crm_section_title": "ðŸ”— CRM Integration",
        "crm_customer_id": "CRM Customer ID",
        "crm_import_success": "CRM data loaded",
        "crm_import_failed": "Failed to fetch CRM data",
        "crm_enable": "Enable CRM integration",
        "crm_enable_help": "Enable loading customer info from CRM",
        "crm_api_key_missing": "CRM API key not set. Please set CRM_API_KEY environment variable.",
    },
    "es": {
        "app_title": "ðŸ¢ SaaS de Ventas",
        "menu": "MenÃº",
        "select_page": "Seleccionar pÃ¡gina",
        "pre_advice": "Consejo previo",
        "post_review": "RevisiÃ³n posterior",
        "icebreaker": "Rompehielos",
        "history": "Historial",
        "settings": "ConfiguraciÃ³n y personalizaciÃ³n",
        "search_enhancement": "BÃºsqueda avanzada",
        "quickstart_mode": "Modo de inicio rÃ¡pido",
        "quickstart_help": "Mostrar solo entradas esenciales",
        "sidebar_toggle_label": "â˜° MenÃº",
        "sidebar_toggle_help": "Mostrar u ocultar la barra lateral",
        "tab_navigation_hint": "Use las pestaÃ±as de abajo para cambiar de pÃ¡gina",
        "fill_later": "Completar despuÃ©s",
        "skip": "Saltar",
        "later_help": "Los campos opcionales se pueden editar mÃ¡s tarde",
        "tutorial_title": "Bienvenido a Sales SaaS",
        "tutorial_message": "Este breve tutorial te ayudarÃ¡ a comenzar. Puedes mostrarlo de nuevo desde ConfiguraciÃ³n.",
        "tutorial_close": "Comenzar",
        "show_tutorial_on_start": "Mostrar tutorial al inicio",
        "show_tutorial_on_start_help": "Mostrar una breve guÃ­a al iniciar la aplicaciÃ³n",
        "show_tutorial_again": "Mostrar tutorial ahora",

        "pre_advice_header": "Consejo previo",
        "pre_advice_desc": "Apoya tu preparaciÃ³n antes de las reuniones. Proporciona tipo de venta, industria e informaciÃ³n del producto.",
        "input_form_tab": "Formulario",
        "icebreaker_tab": "Rompehielos",

        "post_review_header": "ðŸ” AnÃ¡lisis posterior a la reuniÃ³n",
        "post_review_desc": "Analiza notas de reuniones para generar mejoras y prÃ³ximas acciones.",

        "icebreaker_header": "ðŸŽ¯ Generador de rompehielos",
        "icebreaker_desc": "Genera rompehielos naturales segÃºn el tipo de venta y la industria.",

        "history_header": "Historial (Sesiones)",
        "history_desc": "Examinar y reutilizar resultados guardados.",
        "history_export_json": "Descargar JSON",
        "history_export_csv": "Descargar CSV",

        "search_enhancement_title": "ðŸ” Mejora de bÃºsqueda",
        "search_enhancement_desc": "Aprovecha el conocimiento de LLM para mejorar la calidad y la puntuaciÃ³n de la bÃºsqueda.",

        "settings_page_title": "âš™ï¸ ConfiguraciÃ³n y personalizaciÃ³n",
        "settings_page_desc": "Personaliza cÃ³mo funciona la aplicaciÃ³n.",
        "tab_llm": "ðŸ¤– ConfiguraciÃ³n de LLM",
        "tab_search": "ðŸ” ConfiguraciÃ³n de bÃºsqueda",
        "tab_ui": "ðŸŽ¨ ConfiguraciÃ³n de UI",
        "tab_data": "ðŸ’¾ ConfiguraciÃ³n de datos",
        "tab_import_export": "ðŸ“ Importar/Exportar",
        "tab_crm": "ðŸ”— IntegraciÃ³n CRM",
        "language_setting": "Idioma",
        "language_setting_help": "Idioma de la aplicaciÃ³n",
        "pre_advice_industry_label": "Industria *",
        "pre_advice_product_label": "Producto/Servicio *",
        "pre_advice_product_label_optional": "Producto/Servicio",
        "post_review_industry_label": "Industria *",
        "post_review_product_label": "Producto/Servicio *",
        "import_from_crm": "Importar desde CRM",
        "crm_section_title": "ðŸ”— IntegraciÃ³n CRM",
        "crm_customer_id": "ID de cliente de CRM",
        "crm_import_success": "Datos de CRM cargados",
        "crm_import_failed": "No se pudieron obtener los datos del CRM",
        "crm_enable": "Habilitar integraciÃ³n CRM",
        "crm_enable_help": "Permitir cargar informaciÃ³n de clientes desde el CRM",
        "crm_api_key_missing": "Falta la clave API de CRM. Establece la variable de entorno CRM_API_KEY.",
    },
}


def get_language() -> str:
    if "language" in st.session_state:
        return st.session_state["language"]
    manager = SettingsManager()
    lang = manager.load_settings().language
    st.session_state["language"] = lang
    return lang


def t(key: str) -> str:
    lang = get_language()
    return TRANSLATIONS.get(lang, TRANSLATIONS["ja"]).get(key, key)
